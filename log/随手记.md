## 随手记

#### 右侧列表需要实现点击变色(已经废弃,改为动态修改类名)

思考: dom元素使用css的hover active 和focus等伪类来处理

​		:active，元素被点击时变色，但颜色在点击后消失

​		:focus， 元素被点击后变色，且颜色在点击后不消失

问题: div等元素无法接受键盘或其他用户事件，无法支持:focus伪类

解决: 可通过增加tabIndex属性使其支持:focus

代码:

```html
<div class="list" v-for="(item, i) in chatList" @click="selectChat" :key="item.id" :tabindex="i">
          <div class="left">
            <img src="" alt="" />
          </div>
          <div class="right">
            <span>{{ item.name }}</span>
          </div>
        </div>
```

```css
&:focus {
          background-color: #c5c4c5;
        }
```

效果:

![image-20211104163252938](C:\Users\邢益军\AppData\Roaming\Typora\typora-user-images\image-20211104163252938.png)



#### 跳转同一个组件，路由参数不同，页面数据却不更新问题

原因:  当需要在同一个页面不停跳转，根据不同参数来更新页面内容时，路由参数改变，但是页面内容没改变。因为跳转的是同一个组件，该组件在初次加载的时候，会执行组件的生命周期，但是后面再跳转的时候，组件会被重用，不会再执行生命周期中的某些过程，因此mounted也不会执行，写在mounted中的初始化也不会执行。

处理方法:

1. 使用组件内导航 beforeRouteUpdate
2. 使用watch监听路由参数,监听到变更就重新加载



#### 使用滤镜属性drop-shadow来设置不规则阴影

filter: drop-shadow(0 2px 8px rgb(192, 192, 192));



#### 使用contentEditable的div重新获取焦点,并将焦点定位在之前失焦前的位置

参考:https://blog.csdn.net/fesfsefgs/article/details/109540259

解决:
1. 使用dom.focus()来重新获取焦点
2. 在失去焦点前将焦点信息存储下来,使用 window.getSelection()获取Selection对象,它包含了焦点以及用户选区的内容

![image-20211118135453196](C:\Users\邢益军\AppData\Roaming\Typora\typora-user-images\image-20211118135453196.png)

3. 使用window.getSelection().getRangeAt(0)获取"拖蓝"相关信息 ----实际上指用户选区的起止位置等一些信息

![image-20211118135721523](C:\Users\邢益军\AppData\Roaming\Typora\typora-user-images\image-20211118135721523.png)

4. 将3获取的range对象也就是焦点信息存储下
5. 在调用focus()获取焦点后,焦点出现在初始位置,使用window.getSelection().removeAllRanges()删除所有选区信息,再使用window.getSelection().addRange(range)将之前存储来下的range对象添加成为新的选区信息,这样焦点就会回到之前的位置

